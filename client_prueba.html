<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Socket.IO Client</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.4/socket.io.js"></script>
</head>
<body>

  <h1>Socket.IO Client</h1>

  <label for="usuario">Username:</label>
  <input type="text" id="usuario" placeholder="Enter your username">
  <label for="usuario">Username2 :</label>
  <input type="text" id="usuario2" placeholder="Enter your username">

  <label for="sala">Room:</label>
  <input type="text" id="sala" placeholder="Enter the room name">

  <label for="mensaje">Message:</label>
  <input type="text" id="mensaje" placeholder="Enter your message">

  <button id="sendButton">Send Message</button>

  <script>
    // Conectar al servidor de Socket.IO
    // const socket = io('http://localhost:8001');
    const socket = io('https://web_socket.gtr.wundertec.com');
   
// Enviar un mensaje al servidor desde el cliente
document.getElementById('sendButton').addEventListener('click', () => {
      const usuario = document.getElementById('usuario').value;
      const usuario2 = document.getElementById('usuario2').value;
      const sala = document.getElementById('sala').value;
      const mensaje = document.getElementById('mensaje').value;
      const messagesList = document.getElementById('messages');


      // if (usuario && sala && mensaje && usuario2) {
        // Unirse a la sala
        // let roomG = '';
        // Enviar el mensaje al servidor
        socket.emit('iniciarSocket', usuario); // ya jala
        socket.emit('obtenerSalas', usuario, usuario2); // ya jala
        socket.on('responseSalas', data =>{
            console.log("responseSalas" + data);
            
        socket.emit('entrarChat', usuario, sala, usuario2); // ya jala 
        //enviar un mensaje 
        socket.emit('enviarMensaje', { usuario, mensaje ,  sala}); // ya jala
        

        //para recibir el mensaje 
        socket.on('recibirMensaje', (message) => {
            console.log('Mensaje del servidor:', message.mensaje);
        });


        //para obtener los mensajes de una sala 
        socket.emit('obtenerMensajes', sala); // ya jala3
        socket.on('todosMensajes', newMensajes =>{
          console.log('lsitado de mensajes' + newMensajes);
        })
        });


       

      // } else {
      //   alert('Por favor, complete todos los campos.');
      // }
    });
  </script>
</body>
</html>